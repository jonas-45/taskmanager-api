<!DOCTYPE html>
<html lang="en">
<%- include('./partials/head.ejs') %>
<body>
  <div class="container">
    <h2>Create Account</h2>
    <form action="/signup" method="POST" id="register-form">
      <input type="text" name="name" id="name" placeholder="Full name" required />
      <input type="email" name="email" id="email" placeholder="Email" required />
      <input type="password" name="password" id="password" placeholder="Password" required />
      <button type="submit" id="signup-btn">Sign Up</button>
    </form>
    <div class="link">
      <p>Already have an account? <a href="/login">Login</a></p>
    </div>
  </div>

  <script>
    const registerForm = document.getElementById('register-form');
    registerForm.addEventListener('submit', (event) => {
        event.preventDefault();

        const formData = {
            name: document.getElementById('name').value,
            email: document.getElementById('email').value,
            password: document.getElementById('password').value
        }

        fetch('/signup', {
            method: 'POST',
            headers: {
                "Content-Type": "application/json"
            },
            body: JSON.stringify(formData)
        })
        .then(response => response.json())
        .then((data) => {
            alert(data.message);
        })
        .catch(err => console.log(`An error occurred: ${err}`));
    })
  </script>
</body>
</html>
